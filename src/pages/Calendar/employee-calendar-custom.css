/*
  This file uses MUI theme CSS variables for color consistency.
  See: https://mui.com/material-ui/customization/default-theme/
  Example variables:
    --mui-palette-primary-main
    --mui-palette-background-default
    --mui-palette-background-paper
    --mui-palette-text-primary
    --mui-palette-text-secondary
    --mui-palette-grey-100, --mui-palette-grey-200, etc.
*/

/* Calendar container */
.rbc-calendar {
  background: var(--mui-palette-background-default, #fff);
  border-radius: 16px;
  box-shadow: 0 2px 12px rgba(100, 108, 255, 0.08);
  padding: 8px;
  height: 100%;
  min-height: 100%;
}

@media (min-width: 600px) {
  .rbc-calendar {
    padding: 8px;
    border-radius: 12px;
  }
}

@media (max-width: 600px) {
  .rbc-calendar {
    border-radius: 0;
    box-shadow: none;
    padding: 0px;
    height: 100%;
    min-height: 100%;
    overflow: auto;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-calendar {
    border-radius: 0;
    box-shadow: none;
    padding: 0px;
    height: 100%;
    min-height: 100%;
    overflow: auto;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-calendar {
    border-radius: 0;
    box-shadow: none;
    padding: 0px;
    height: 100%;
    min-height: 100%;
    overflow: auto;
  }
}

/* Toolbar */
.rbc-toolbar {
  background: var(--mui-palette-background-paper, #f5f5f5);
  border-radius: 12px;
  margin-bottom: 8px;
  padding: 4px 8px;
  font-size: 1rem;
}

@media (min-width: 600px) {
  .rbc-toolbar {
    margin-bottom: 4px;
    padding: 2px 6px;
    font-size: 0.9rem;
    min-height: 36px;
  }
}

@media (max-width: 600px) {
  .rbc-toolbar {
    margin-bottom: 2px;
    padding: 1px 3px;
    font-size: 0.8rem;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-toolbar {
    margin-bottom: 1px;
    padding: 1px 2px;
    font-size: 0.8rem;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-toolbar {
    margin-bottom: 1px;
    padding: 1px 2px;
    font-size: 0.8rem;
  }
}

/* Weekday headers */
.rbc-header {
  background: var(--mui-palette-grey-100, #f0f4f8);
  color: var(--mui-palette-primary-main, #646cff);
  font-weight: 600;
  font-size: 1rem;
  border-bottom: 1px solid var(--mui-palette-grey-200, #e0e0e0);
}

@media (min-width: 600px) {
  .rbc-header {
    font-size: 0.9rem;
    padding: 4px 2px;
    min-height: 32px;
    line-height: 1.2;
  }
}

@media (max-width: 600px) {
  .rbc-header {
    font-size: 0.75rem;
    padding: 1px 1px;
    min-height: 24px;
    line-height: 1.1;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-header {
    font-size: 0.7rem;
    padding: 1px 1px;
    min-height: 20px;
    line-height: 1.0;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-header {
    font-size: 0.7rem;
    padding: 1px 1px;
    min-height: 24px;
    line-height: 1.1;
  }
}

/* Ensure date header border aligns with time slot grid */
.rbc-header {
  border-bottom: 1px solid var(--mui-palette-grey-200, #e0e0e0);
  box-sizing: border-box;
}
.rbc-time-header-cell {
  border-bottom: 1px solid var(--mui-palette-grey-200, #e0e0e0);
  box-sizing: border-box;
}

/* Time gutter */
.rbc-time-gutter {
  background: var(--mui-palette-grey-50, #fafafa);
  color: var(--mui-palette-text-secondary, #888);
  font-size: 0.95rem;
}

@media (max-width: 600px) {
  .rbc-time-gutter {
    font-size: 0.75rem;
    padding-right: 2px;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-time-gutter {
    font-size: 0.7rem;
    padding-right: 1px;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-time-gutter {
    font-size: 0.7rem;
    padding-right: 1px;
  }
}

/* Event styling */
.rbc-event {
  background: var(--mui-palette-primary-light, #e3f2fd) !important;
  color: var(--mui-palette-primary-main, #646cff) !important;
  border: 1px solid var(--mui-palette-primary-main, #646cff) !important;
  border-radius: 8px !important;
  box-shadow: 0 2px 8px rgba(100, 108, 255, 0.08) !important;
  padding: 4px 8px !important;
  font-size: 14px !important;
  margin: 0 auto !important;
}

@media (max-width: 600px) {
  .rbc-event {
    padding: 1px 3px !important;
    font-size: 10px !important;
    border-radius: 3px !important;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-event {
    padding: 1px 2px !important;
    font-size: 9px !important;
    border-radius: 2px !important;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-event {
    padding: 1px 2px !important;
    font-size: 9px !important;
    border-radius: 2px !important;
  }
}

/* Selected event */
.rbc-event.rbc-selected {
  border: 2px solid #ff9800 !important;
}

/* Remove current day highlight and set all day columns to blue background */
.rbc-today,
.rbc-day-bg {
  background: #e3f2fd !important;
}

/* Hide the all-day row for week view */
.rbc-allday-cell {
  display: none;
}

/* Make time slots fill available space, with a minimum height of the viewport */
.rbc-time-content > .rbc-timeslot-group {
  height: 100%;
  min-height: 100%;
}

@media (max-width: 600px) {
  .rbc-time-content > .rbc-timeslot-group {
    min-height: 100%;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-time-content > .rbc-timeslot-group {
    min-height: 100%;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-time-content > .rbc-timeslot-group {
    min-height: 100%;
  }
}

/* Make event text larger and more readable */
.rbc-event-content {
  font-size: 1.1rem;
  line-height: 1.4;
  white-space: normal;
  word-break: break-word;
}

@media (max-width: 600px) {
  .rbc-event-content {
    font-size: 0.8rem;
    line-height: 1.1;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-event-content {
    font-size: 0.75rem;
    line-height: 1.1;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-event-content {
    font-size: 0.75rem;
    line-height: 1.1;
  }
}

/* Make each individual time slot taller for better readability */
.rbc-time-slot {
  min-height: 3.5rem;
}

@media (min-width: 600px) {
  .rbc-time-slot {
    min-height: 2.5rem;
  }
}

@media (max-width: 600px) {
  .rbc-time-slot {
    min-height: 3rem;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-time-slot {
    min-height: 2rem;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-time-slot {
    min-height: 2.5rem;
  }
}

/* Comprehensive fix for vertical border alignment */
.rbc-header,
.rbc-day-bg,
.rbc-timeslot-group,
.rbc-time-gutter,
.rbc-timeslot-group > .rbc-time-slot {
  box-sizing: border-box;
}

.rbc-time-gutter {
  border-right: 1px solid var(--mui-palette-grey-200, #e0e0e0);
  background: var(--mui-palette-grey-50, #fafafa);
  width: 4rem;
  min-width: 4rem;
  max-width: 4rem;
}

@media (max-width: 600px) {
  .rbc-time-gutter {
    width: 2.5rem;
    min-width: 2.5rem;
    max-width: 2.5rem;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-time-gutter {
    width: 2rem;
    min-width: 2rem;
    max-width: 2rem;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-time-gutter {
    width: 2.5rem;
    min-width: 2.5rem;
    max-width: 2.5rem;
  }
}

.rbc-header,
.rbc-day-bg {
  border-right: 1px solid var(--mui-palette-grey-200, #e0e0e0);
}

.rbc-header:last-child,
.rbc-day-bg:last-child {
  border-right: none;
}

.rbc-header,
.rbc-day-bg {
  padding: 0;
  margin: 0;
}

.rbc-header {
  border-bottom: 1px solid var(--mui-palette-grey-200, #e0e0e0);
}

.rbc-row-content {
  border-top: none;
}

/* Remove forced scrollbar/padding from header */
.rbc-time-header {
  overflow-y: visible;
  padding-right: 0;
}

/* Optionally, style the scrollbar for the grid for consistency */
.rbc-time-content {
  scrollbar-width: thin;
  scrollbar-color: var(--mui-palette-grey-200, #e0e0e0) var(--mui-palette-grey-50, #fafafa);
}

/* Hide scrollbar but keep scrollability for the grid */
.rbc-time-content {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE 10+ */
}
.rbc-time-content::-webkit-scrollbar {
  display: none; /* Chrome/Safari/Webkit */
}

@media (max-width: 600px) {
  .rbc-time-content {
    overflow-x: auto;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    max-height: 100%;
  }
}

@media (max-width: 600px) and (orientation: landscape) {
  .rbc-time-content {
    overflow-x: auto;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    max-height: 100%;
  }
}

@media (max-width: 600px) and (orientation: portrait) {
  .rbc-time-content {
    overflow-x: auto;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    max-height: 100%;
  }
}

/* Force all day columns to have the blue background, including today, with maximum specificity */
.rbc-time-view .rbc-day-bg,
.rbc-time-view .rbc-day-bg.rbc-today,
.rbc-time-view .rbc-row-bg > .rbc-day-bg {
  background: #e3f2fd !important;
  background-color: #e3f2fd !important;
  opacity: 1 !important;
}

/* Remove extra padding/margin from date headers for alignment */
.rbc-header {
  padding: 0 !important;
  margin: 0 !important;
}

/* Use overlay scrollbar if supported for better alignment */
.rbc-time-content {
  overflow-y: overlay;
}

/* Remove right margin from date header cells for alignment */
.rbc-header {
  margin-right: 0 !important;
}

/* Remove all margin and padding from date header cells and their children for alignment */
.rbc-header {
  margin: 0 !important;
  padding: 0 !important;
  width: 100% !important;
  box-sizing: border-box !important;
}
.rbc-header > * {
  margin: 0 !important;
  padding: 0 !important;
}

/* Override inline margin-right set by react-big-calendar for header alignment */
.rbc-time-header.rbc-overflowing {
  margin-right: 0 !important;
}

/* Force blue background for all day columns, including today and now */
.rbc-day-slot,
.rbc-day-slot.rbc-now,
.rbc-day-slot.rbc-today {
  background: #e3f2fd !important;
}

.rbc-day-slot > *,
.rbc-day-slot.rbc-now > *,
.rbc-day-slot.rbc-today > * {
  background: transparent !important;
}

/* Set date header background to uniform grey for all days */
.rbc-header,
.rbc-header.rbc-today {
  background: #f5f5f5 !important;
  color: #1976d2;
}

/* Apply a dashed border to the current day column and its header */
.rbc-header.rbc-today,
.rbc-day-slot.rbc-today {
  border: 2px dashed #1976d2 !important;
  box-sizing: border-box;
}

/* Remove the bottom border from the date header and the top border from the current day column */
.rbc-header.rbc-today {
  border-bottom: none !important;
}
.rbc-day-slot.rbc-today {
  border-top: none !important;
}

/* Make the calendar grid horizontally scrollable */
.rbc-time-view {
  overflow-x: auto;
  overflow-y: visible;
  width: 100%;
}

/* Show only 2 days at a time (out of 5) */
.rbc-time-header,
.rbc-time-content {
  min-width: unset !important;
  width: unset !important;
  max-width: unset !important;
}

/* Each day column: set to max 18rem, use rem units for width */
.rbc-header,
.rbc-day-bg,
.rbc-day-slot {
  min-width: 18rem !important;
  width: 18rem !important;
  max-width: 18rem !important;
  box-sizing: border-box !important;
}

/* Center the calendar grid horizontally if screen is wider */
.rbc-time-view {
  margin-left: auto;
  margin-right: auto;
}

/* Prevent columns and their content from being scrollable */
.rbc-time-content,
.rbc-day-slot,
.rbc-header,
.rbc-day-bg {
  overflow-x: visible !important;
  overflow-y: visible !important;
}

/* Ensure all day columns, including the last, have background */
.rbc-day-bg,
.rbc-day-bg:last-child,
.rbc-header,
.rbc-header:last-child {
  background: #e3f2fd !important;
  background-color: #e3f2fd !important;
  opacity: 1 !important;
  border-right: 1px solid #e0e0e0;
}

/* Remove border from last column for clean edge */
.rbc-day-bg:last-child,
.rbc-header:last-child {
  border-right: none;
}

/* Sticky date header row for vertical scroll */
.rbc-time-header {
  position: sticky;
  top: 0;
  z-index: 10;
  background: #f5f5f5 !important;
}

/* Sticky time gutter for horizontal scroll */
.rbc-time-gutter {
  position: sticky;
  left: 0;
  z-index: 11;
  background: #fafafa !important;
}

.rbc-time-header-gutter, .rbc-time-gutter {
  width: 5rem !important;
  min-width: 5rem !important;
  max-width: 5rem !important;
  box-sizing: border-box !important;
  padding: 0 !important;
  margin: 0 !important;
  font-size: 0.95rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.rbc-time-view, .rbc-time-content {
  overflow-x: auto;
  overflow-y: overlay;
}

/* Hide horizontal scrollbar if not needed */
.rbc-time-view::-webkit-scrollbar,
.rbc-time-content::-webkit-scrollbar {
  height: 0 !important;
}
.rbc-time-view {
  scrollbar-width: none; /* Firefox */
}
.rbc-time-content {
  scrollbar-width: none; /* Firefox */
}

/* Hide vertical scrollbar */
.rbc-time-view::-webkit-scrollbar-vertical,
.rbc-time-content::-webkit-scrollbar-vertical {
  width: 0 !important;
  background: transparent !important;
}
.rbc-time-view {
  max-width: calc(5rem + 7 * 18rem);
}

.rbc-time-view {
  background: #e3f2fd !important;
  margin-left: auto;
  margin-right: auto;
  max-width: calc(5rem + 7 * 18rem);
  width: 100%;
}

.rbc-day-bg,
.rbc-day-slot,
.rbc-day-bg.rbc-today,
.rbc-day-slot.rbc-today {
  background: transparent !important;
}

/* Mobile-specific improvements */
@media (max-width: 600px) {
  .rbc-time-view {
    height: 100%;
    min-height: 100%;
    overflow: auto;
    max-height: 100%;
  }
  
  .rbc-time-header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: #fff;
  }
  
  .rbc-time-gutter {
    position: sticky;
    left: 0;
    z-index: 5;
    background: #fafafa;
  }
  
  .rbc-time-content {
    min-height: 100%;
    max-height: 100%;
  }
}

/* Landscape-specific improvements */
@media (max-width: 600px) and (orientation: landscape) {
  .rbc-time-view {
    height: 100%;
    min-height: 100%;
    overflow: auto;
    max-height: 100%;
  }
  
  .rbc-time-header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: #fff;
  }
  
  .rbc-time-gutter {
    position: sticky;
    left: 0;
    z-index: 5;
    background: #fafafa;
  }
  
  .rbc-time-content {
    min-height: 100%;
    max-height: 100%;
  }
}

/* Portrait-specific improvements */
@media (max-width: 600px) and (orientation: portrait) {
  .rbc-time-view {
    height: 100%;
    min-height: 100%;
    overflow: auto;
    max-height: 100%;
  }
  
  .rbc-time-header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: #fff;
  }
  
  .rbc-time-gutter {
    position: sticky;
    left: 0;
    z-index: 5;
    background: #fafafa;
  }
  
  .rbc-time-content {
    min-height: 100%;
    max-height: 100%;
  }
}
